<!doctype html>
<html ng-app="vedutaApp">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../build/veduta.css">
  </head>
  <body ng-controller="MainController as ctrl">
    <head>
      <div class=="page-header">
        <h1 class="text-center">Fränkische Ansichten</h1>
      </div>
    </head>
    <main>
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-7">
              <div class="admin-unit-selected">
                  <div class="text-left" ng-show="ctrl.adminUnitSelected.fullname">Ausgewählt: {{ctrl.adminUnitSelected.fullname}}</div>  
              </div>    
            <div id="map" ngeo-map="ctrl.map"></div>
            <div id="attribution">
              <ul>
                  <li>Datenquelle: Bayerische Vermessungsverwaltung – <a href='www.geodaten.bayern.de'>www.geodaten.bayern.de</a>;</li> 
                  <li>© <a href='https://www.mapbox.com/about/maps/'>Mapbox</a>;</li>
                  <li>© <a href='www.openstreetmap.org/copyright'>OpenStreetMap-Mitwirkende</a></li>
              </ul>    
            </div>
            <p>
               <label for="checkbox">Karte auf meinen Standort zentrieren:</label>
               <input id="checkbox" type="checkbox" ng-model="ctrl.geolocation.tracking"  />
             </p>
          </div>
            <div class="col-md-5">
              <table class="table table-condensed table-hover">
                <thead> 
                  <tr>
                    <td colspan="2">
                      <div class="text-right"> 
                        <span ng-show="ctrl.debug">Zoom: {{ctrl.zoom}} - Ebene: {{ctrl.admin_long}} - Ansichten: {{ctrl.totalViews}}</span>
                        <span> Seite: {{ctrl.currentPage}}/{{ctrl.numPages}}</span>
                      </div>
                  </td>    
                </thead>
                <tfoot>
                  <tr>
                    <td colspan="2" class="text-center">
                      <uib-pagination 
                        ng-model="ctrl.currentPage" 
                        items-per-page ="ctrl.itemsPerPage"
                        total-items="ctrl.totalViews"
                        max-size = 6
                        num-pages="ctrl.numPages"
                        previous-text="|&lt;"
                        next-text="&gt;|"
                        ng-change="ctrl.pageChanged()"
                      ></uib-pagination>
                    </td>    
                  </tr>    
                </tfoot>    
                <tbody>    
                <tr class="list-row" ng-repeat="view in ctrl.views.slice(((ctrl.currentPage-1)*ctrl.itemsPerPage), ((ctrl.currentPage)*ctrl.itemsPerPage))" ng-mouseenter="ctrl.hover(view)" ng-mouseleave="ctrl.unhover(view)" ng-click="ctrl.zoomIn(view, $event)">
                    <td class="thumbnail-column"><img class="thumbnail-view" ng-src="{{view.icon}}" ng-click="ctrl.thumbnailClicked(view, $event)"/></td> 
                    <td class="view-row">
                        <div id="title">{{view.title}}</div/>
                        <div ng-show="view.gmd">Gemeinde: {{view.gmd}}</div>
                        <div ng-show="view.lkr">Kreis: {{view.lkr}}</div>
                        <div ng-show="view.regbez">{{view.regbez}}</div>
                        <div>{{view.viewCount}}</div>
                    </td>  
                </tr>
                </tbody>  
              </table> 
            </div>    
          </div>
        </div>  
      </div>
    </main>
    <script src="../node_modules/angular/angular.js"></script>
    <script src="../node_modules/angular-gettext/dist/angular-gettext.js"></script> 
    <script src="../node_modules/ui-bootstrap-custom/ui-bootstrap-custom-tpls-1.3.2.min.js"></script> 
    <script src="/@?main=js/app.js"></script>
    <!-- <script src="../build/veduta.js"></script> -->   
  </body>
</html>

